/**
 * Add a create new group modal to the page.
 *
 * @module     local_learningdashboard/learningdashboard
 * @class      learningdashboard
 * @package    local_learningdashboard
 * @copyright  Moodle India
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later 
 */
define("local_learningdashboard/learningdashboard",["local_courses/jquery.dataTables","jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui","core/templates","local_learningdashboard/graph"],(function(dataTable,$,Str,ModalFactory,ModalEvents,Fragment,Ajax,Y,Templates,Graph){var learningdashboard=function(args){this.contextid=args.contextid?args.contextid:1,this.args=args,this.init(args),this.tunit=args.tunit};return learningdashboard.prototype.modal=null,learningdashboard.prototype.contextid=-1,learningdashboard.prototype.init=function(args){var self=this,head={key:"popuptittle",component:"local_learningdashboard",param:{title:this.args.ismanager?this.args.userfullname:this.args.creditstype,count:this.args.coursecount}};return customstrings=Str.get_strings([head,{key:"squads",component:"local_learningdashboard"}]),customstrings.then(function(strings){var title="";return"coursespopup"==this.args.callback?title=strings[0]:"squads"==this.args.callback?title=strings[1]:"users"==this.args.callback?title=strings[2]:"instructors"==this.args.callback?title=strings[3]:"reviews"==this.args.callback?title=strings[5]:"gradeshistory"==this.args.callback&&(title=strings[6]),ModalFactory.create({type:ModalFactory.types.CANCEL,title:title,body:this.getBody()})}.bind(this)).then(function(modal){return this.modal=modal,self.modal.setLarge(),self.modal.getRoot().on(ModalEvents.hidden,function(){self.modal.setBody(""),self.modal.hide(),self.modal.destroy()}.bind(this)),self.modal.getRoot().on(ModalEvents.cancel,function(){self.modal.setBody(""),self.modal.hide(),self.modal.destroy()}.bind(this)),this.modal.getRoot().on(ModalEvents.bodyRendered,function(){this.dataTableshow(args.tunit)}.bind(this)),self.modal.show(),this.modal}.bind(this))},learningdashboard.prototype.dataTableshow=function(tunit){$.fn.dataTable.ext.errMode="none",$(".managementpopuptable_details").dataTable({bPaginate:!0,bFilter:!0,bLengthChange:!0,lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"All"]],language:{emptyTable:"No Records Found",paginate:{previous:"<",next:">"}},bProcessing:!0})},learningdashboard.prototype.getBody=function(args){return console.log(this.args),Fragment.loadFragment(this.args.component,this.args.callback,1,this.args)},learningdashboard.prototype.getFooter=function(customstrings){return'<button type="button" class="btn btn-secondary" data-action="cancel">'+customstrings[0]+"</button>"},learningdashboard.prototype.getcontentFooter=function(){return Str.get_strings([{key:"cancel"}]).then(function(s){return $footer='<button type="button" class="btn btn-secondary" data-action="cancel">'+s[1]+"</button>",$footer}.bind(this))},{init:function(args){return new learningdashboard(args)},Datatable:function(){},teamsstatus:function(args){$(".learningdashboard_team_status").dataTable({bPaginate:!0,bFilter:!0,bLengthChange:!1,pageLength:5,language:{emptyTable:"No Records Found",paginate:{previous:"<",next:">"}},bProcessing:!0,ordering:!1}),$.fn.dataTable.ext.errMode="none"},creditsdata:function(args){function creditsview(obj){var status="completed";$(obj).hasClass("pending")&&(status="pending",$(obj).addClass("active"),$(".completed").removeClass("active")),"completed"==status&&($(obj).addClass("active"),$(".pending").removeClass("active"));const params={status:status};var promise=Ajax.call([{methodname:"local_learningdashboard_creditsdata_view",args:params,dataType:"json"}]);$("#creditstables").empty(),promise[0].done((function(resp){(console.log(resp),0==resp.totalcount)?$("#creditstables").html('<div class="text-center calendar_events attempt_text"><h4>No Events Available on this Date.</></h4></div>'):Templates.render("local_learningdashboard/creditsdata_view",resp.records).then((function(html,js){$("#creditstables").html(html)}));Graph.init(resp.graphdata);const obj=JSON.parse(resp.records.data);$("head").append(obj.javascript)})).fail((function(ex){console.log(ex)}))}$(document).on("click",".completed, .pending",(function(){creditsview(this)})),creditsview()},load:function(){}}}));

//# sourceMappingURL=learningdashboard.min.js.map