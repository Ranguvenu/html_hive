define ("block_my_event_calendar/event_popup",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui"],function(a,b,c,d){return{popup_eventinfo:function popup_eventinfo(b){var e="",f="",g=b.eventlocal_eventname;if("session_open"==b.eventeventtype||"open"==b.eventeventtype){if("null"==b.eventlocal_eventenddate){f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-1\"> <i class=\"icon fa fa-clock-o fa-fw \" aria-hidden=\"true\" title=\"When\" aria-label=\"When\"></i> </div><div class=\"col-11\"> Opens on "+b.eventlocal_eventstartdate+"</div></div>"}else{f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-1\"> <i class=\"icon fa fa-clock-o fa-fw \" aria-hidden=\"true\" title=\"When\" aria-label=\"When\"></i> </div><div class=\"col-11\">"+b.eventlocal_eventstartdate+" - "+b.eventlocal_eventenddate+"</div></div>"}}else if("session_close"==b.eventeventtype||"close"==b.eventeventtype){f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-1\"> <i class=\"icon fa fa-clock-o fa-fw \" aria-hidden=\"true\" title=\"When\" aria-label=\"When\"></i> </div><div class=\"col-11\"> Closes on "+b.eventlocal_eventenddate+"</div></div>"}f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-1\"> <i class=\"icon fa fa-align-left fa-fw \" aria-hidden=\"true\" title=\"Trainers\" aria-label=\"Trainers\"></i></i> </div><div class=\"col-11\">"+b.eventtrainer+"</div></div>";f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-1\"> <i class=\"icon fa fa-map-marker fa-fw \" aria-hidden=\"true\" title=\"Location\" aria-label=\"Location\"></i> </div><div class=\"col-11\">"+b.eventlocation+"</div></div>";e+="<ul class=\"eventpopup_footer\">";switch(b.eventplugin){case"local_classroom":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var h=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_classroom",success:function success(a){if(1==a){c="<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_classroom/classroom').ManageclassroomStatus({action:'selfenrol', id: "+b.eventinstance+", classroomid:"+b.eventinstance+",actionstatusmsg:'classroom_self_enrolment',classroomname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Enrol</button></a> </li>"}else{c="<li>Not published</li>"}}});return c}();e+=h}else if(!0==b.eventenrolled){e+="<li><a href= \""+M.cfg.wwwroot+"/local/classroom/view.php?cid="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">Launch</button></a> </li>"}break;case"local_program":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var i=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_program",success:function success(a){if(1==a){c="<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_program/program').ManageprogramStatus({action:'selfenrol', id: "+b.eventinstance+", programid:"+b.eventinstance+",actionstatusmsg:'program_self_enrolment',programname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Enrol</button></a> </li>"}else{c="<li>Not published</li>"}}});return c}();e+=i}else if(!0==b.eventenrolled)e+="<li><a href= \""+M.cfg.wwwroot+"/local/program/view.php?bcid="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">Launch</button></a> </li>";break;case"local_certification":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var j=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_certification",success:function success(a){if(1==a){c="<li><a href= \"javascript:void(0)\"  onclick=\"(function(e){ require('local_certification/certification').ManagecertificationStatus({action:'selfenrol', id: "+b.eventinstance+", certificationid:"+b.eventinstance+",actionstatusmsg:'certification_self_enrolment',certificationname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Enrol</button></a> </li>"}else{c="<li>Not published</li>"}}});return c}();e+=j}else if(!0==b.eventenrolled)e+="<li><a href= \""+M.cfg.wwwroot+"/local/certification/view.php?ctid="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">Launch</button></a> </li>";break;default:e+="<li><a href=\""+M.cfg.wwwroot+"\" target=\"_blank\"></li>";}e+="</ul>";c.create({title:g,body:f,footer:e}).done(function(a){a.show();a.getRoot().on(d.hidden,function(){setTimeout(function(){a.destroy()},1e3)}.bind(this))})},load:function load(){}}});
//# sourceMappingURL=event_popup.min.js.map
