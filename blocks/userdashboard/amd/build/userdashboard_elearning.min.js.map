{"version":3,"sources":["../src/userdashboard_elearning.js"],"names":["define","$","url","templates","notification","str","ajax","userdashboardElearning","self","_filter","_template","_targetSelector","_menu","filter_text","prototype","_getajaxCourses","_offset","_limit","removeRelated","call","methodname","args","filter","_filter_text","filter_offset","filter_limit","done","context","inprogress_elearning","parseJSON","render","then","html","frommenu_target_elearning","existing_active","attr","siblings","removeClass","addClass","fail","exception","_setter","menu_targetselector","parent","callElearning"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle selection changes and actions on the competency tree.\n *\n * @module     block_userdasboard/elearning\n * @package    block_userdasboard\n * @copyright  2018 hemalathacarun <hemalatha@eabyas.in>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'core/url',\n        'core/templates',\n        'core/notification',\n        'core/str',\n        'core/ajax'\n        ], function($,url, templates, notification, str, ajax) {\n\n\n    var userdashboardElearning = function(filter){       \n      self._filter ='';         \n      self._template='';\n      self._targetSelector='';\n      self._menu=0;\n      self.filter_text = '';\n    \n    };\n\n    userdashboardElearning.prototype._getajaxCourses = function(){\n        // alert('4');\n        // alert(self._filter_text);\n        self._menu = 0;\n        if(self._filter=='menu'){\n            self._menu = 1;\n            self._filter = 'inprogress';\n            self._offset = 0;\n            self._limit = 2;\n        }\n\n        var removeRelated = ajax.call([{\n            methodname: 'block_userdashboard_data_for_elearning_courses',\n                args:  {\n                    filter: self._filter,\n                    filter_text: self._filter_text,\n                    filter_offset: self._offset,\n                    filter_limit: self._limit\n                }\n            }\n        ]);\n        \n        removeRelated[0].done(function(context) {\n            \n            context.inprogress_elearning=$.parseJSON(context.inprogress_elearning);\n            // context.filter_form = $.parseJSON(context.filter_form);\n            templates.render('block_userdashboard/loading', {});\n            templates.render(self._template, context).then(function(html,js) { \n                if(self._menu==1){\n                    userdashboardElearning.prototype.frommenu_target_elearning(html,'#elearning_courses');\n                }              \n                else {\n                    var existing_active = $(\".divslide .active_subtab\").attr('id');\n                    $('#'+existing_active).html('');\n                    $('#userdashboard_filter').attr(\"data-filter\" , self._filter);\n                    $(self._targetSelector).siblings().removeClass('active_subtab');         \n                    $(self._targetSelector).addClass('active_subtab');\n                    $(self._targetSelector).html(html);  \n                }           \n            }).fail(notification.exception);\n        }).fail(notification.exception);\n    };\n\n\n    userdashboardElearning.prototype._setter = function(filter,filter_text){      \n        // alert('3');\n        // alert(filter_text);\n        self._filter = filter;\n        self._filter_text = filter_text;\n        if(self._filter =='inprogress'){\n            self._template='block_userdashboard/elearning_courses_innercontent';\n            self._targetSelector ='#elearning_inprogress';\n        }\n\n        if(self._filter =='completed'){\n           self._template='block_userdashboard/elearning_courses_innercontent';\n           self._targetSelector ='#elearning_completed';\n        }\n\n        if(self._filter=='menu'){\n          self._template ='block_userdashboard/userdashboard_courses';\n          self._targetSelector ='#elearning_inprogress';\n        }\n\n        return  userdashboardElearning.prototype._getajaxCourses();\n\n    };\n    \n    userdashboardElearning.prototype.frommenu_target_elearning= function (html, menu_targetselector){\n        // alert('5');\n        $('.dashboard-stat').removeClass('active_main_tab');\n        $('#elearning_courses').addClass('active_main_tab');\n        $(menu_targetselector).parent('.dashboard-stat').addClass('active_main_tab');\n        $(\"#linked_course_details_info\").html(html);\n    };\n\n    userdashboardElearning.callElearning = function(filter,filter_text){\n        // alert('2');      \n        userdashboardElearning.prototype._setter(filter,filter_text);\n    };\n\n   \n\n    /** @alias module:block_userdashboard/userdashboard_elearning.js userdashboardElearning  **/ \n        return userdashboardElearning;\n    \n}); // end of main function"],"file":"userdashboard_elearning.min.js"}