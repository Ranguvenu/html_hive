define ("block_training_calendar/event_popup",["jquery","core/str","core/modal_factory","core/modal_events","core/templates","core/fragment","core/ajax","core/yui"],function(a,b,c,d,e){return{popup_eventinfo:function popup_eventinfo(b){var d="",f="",g=1,h=b.eventlocal_classroomname,i={};i.eventid=b.eventid;i.itemid=b.itemid;i.contenttype=b.eventlocal_eventname;i.classroomname=b.eventlocal_classroomname;i.tabs=[{active:"active",type:"description",name:"Description"},{active:"",type:"sessions",name:"Sessions"},{active:"",type:"prerequisites",name:"Pre-requisites"},{active:"",type:"targetlearners",name:"Target Learners"}];d+="<ul class=\"eventpopup_footer\">";switch(b.eventplugin){case"local_classroom":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var j=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_classroom",success:function success(a){if(1==a){if(!0==b.eventprerequisitecheck){c="<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_classroom/classroom').ManageclassroomStatus({action:'selfenrol', id: "+b.eventinstance+", classroomid:"+b.eventinstance+",actionstatusmsg:'classroom_self_enrolment',classroomname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Enrol</button></a> </li>"}else{c="<div class=\"row col-xs-12\"> Complete the pre-requisites to ENROL </div>"}}else if(2==a){if(!0==b.eventprerequisitecheck){c="<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_classroom/classroom').ManageclassroomStatus({action:'enrolrequest', id: "+b.eventinstance+", classroomid:"+b.eventinstance+",actionstatusmsg:'classroom_enrolrequest_enrolment',classroomname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Request</button></a> </li>"}else{c="<div class=\"row col-xs-12\"> Complete the pre-requisites to ENROL </div>"}}else if(3==a){c="<li><button class=\"btn\">Processing</button></li>"}else if(4==a){c="<li><button class=\"btn\">Waiting</button></li>"}else{c="<li>Not published</li>"}}});return c}();d+=j}else if(!0==b.eventenrolled){d+="<li><a href= \""+M.cfg.wwwroot+"/local/classroom/view.php?cid="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">Launch</button></a> </li>"}break;case"local_program":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var k=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_program",success:function success(a){if(1==a){c="<li><a href= \"javascript:void(0)\" onclick=\"(function(e){ require('local_program/program').ManageprogramStatus({action:'selfenrol', id: "+b.eventinstance+", programid:"+b.eventinstance+",actionstatusmsg:'program_self_enrolment',programname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Enrol</button></a> </li>"}else{c="<li>Not published</li>"}}});return c}();d+=k}else if(!0==b.eventenrolled)d+="<li><a href= \""+M.cfg.wwwroot+"/local/program/view.php?bcid="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">Launch</button></a> </li>";break;case"local_certification":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var l=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_certification",success:function success(a){if(1==a){c="<li><a href= \"javascript:void(0)\"  onclick=\"(function(e){ require('local_certification/certification').ManagecertificationStatus({action:'selfenrol', id: "+b.eventinstance+", certificationid:"+b.eventinstance+",actionstatusmsg:'certification_self_enrolment',certificationname:'"+b.eventlocal_eventname+"'}) })(event)\"><button class=\"btn\">Enrol</button></a> </li>"}else{c="<li>Not published</li>"}}});return c}();d+=l}else if(!0==b.eventenrolled)d+="<li><a href= \""+M.cfg.wwwroot+"/local/certification/view.php?ctid="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">Launch</button></a> </li>";break;case"course":if(!1==b.eventenrolled&&!0==b.eventself_enrol){var m=function(){var c=null;a.ajax({async:!1,type:"POST",global:!1,dataType:"json",url:M.cfg.wwwroot+"/blocks/training_calendar/ajax.php?instance="+b.eventinstance+"&plugin=local_certification",success:function success(a){if(1==a){c="<li><a href= \""+M.cfg.wwwroot+"/course/view.php?id="+b.eventinstance+"\" target=\"_blank\"><button class=\"btn\">View</button></a> </li>"}else{c="<li>Not published</li>"}}});return c}();d+=m}else if(!0==b.eventenrolled)d+="<li><a href= \""+M.cfg.wwwroot+"/course/view.php?id="+b.eventinstance+"\" ><button class=\"btn\">View</button></a> </li>";break;default:d+="<li><a href=\""+M.cfg.wwwroot+"\" target=\"_blank\"></li>";break;}d+="</ul>";f+=d;if("session_open"==b.eventeventtype||"open"==b.eventeventtype){if("null"==b.eventlocal_eventenddate){f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-xs-1\"> <i class=\"icon fa fa-clock-o fa-fw \" aria-hidden=\"true\" title=\"When\" aria-label=\"When\"></i> </div><div class=\"col-xs-11\"> Opens on "+b.eventlocal_eventstartdate+"</div></div>"}else{f+="<div class=\"d-flex  mt-10 mb-10\"><div class=\"calendericon_container\"> <i class=\"icon fa fa-calendar fa-fw \" aria-hidden=\"true\" title=\"ILT Start Date\" aria-label=\"ILT Start Date\"></i> </div><div class=\"content_container\">"+b.eventstartdate+"</div></div>"}}else if("session_close"==b.eventeventtype||"close"==b.eventeventtype){f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-xs-1\"> <i class=\"icon fa fa-clock-o fa-fw \" aria-hidden=\"true\" title=\"When\" aria-label=\"When\"></i> </div><div class=\"col-xs-11\"> Closes on "+b.eventlocal_eventenddate+"</div></div>"}else{f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-xs-1\"> <i class=\"icon fa fa-clock-o fa-fw \" aria-hidden=\"true\" title=\"When\" aria-label=\"When\"></i> </div><div class=\"col-xs-11\"> "+b.eventlocal_eventstartdate+"</div></div>";f+="<div class=\"d-flex  mt-10 mb-10\"><div class=\"calendericon_container\"> <i class=\"icon fa fa-calendar fa-fw  \" aria-hidden=\"true\" title=\"Event type\" aria-label=\"Event type\"></i></i> </div><div class=\"content_container\">"+b.eventeventtype+"</div></div>";f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-xs-1\"> <i class=\"icon fa fa-align-left fa-fw \" aria-hidden=\"true\" title=\"Summary\" aria-label=\"Summary\"></i></i> </div><div class=\"col-xs-11\">"+b.eventsummary+"</div></div>";g=0}if("local_classroom"==b.plugintype){if(b.coursename){var n=b.coursename}else{var n="NA"}if(b.creditpoints){var o=b.creditpoints}else{var o=0}f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-xs-1\"> <i class=\"icon fa fa-book fa-fw \" aria-hidden=\"true\" title=\"Course\" aria-label=\"Course\"></i> </div><div class=\"col-xs-11\"> "+n+"</div></div>";f+="<div class=\"row  mt-10 mb-10\"><div class=\"col-xs-1\"> <i class=\"icon fa fa-money fa-fw \" aria-hidden=\"true\" title=\"Credits\" aria-label=\"Credits\"></i> </div><div class=\"col-xs-11\"> "+o+"</div></div>"}if(1==g){f+="<div class=\"d-flex  mt-10 mb-10\"><div class=\"linkicon_container\"> <i class=\"icon fa fa-link fa-fw \" aria-hidden=\"true\" title=\"URL\" aria-label=\"URL\"></i> </div><div class=\"linkcontent_container\"> "+b.eventprerequisiteurl+"</div></div>";f+="<div class=\"d-flex  mt-10 mb-10\"><div class=\"fileicon_container\"> <i class=\"icon fa fa-file-text fa-fw \" aria-hidden=\"true\" title=\"Self Enrol\" aria-label=\"Self Enrol\"></i> </div><div class=\"filecontent_container\"> "+b.eventiltselfenrol+"</div></div>";f+="<div class=\"d-flex  mt-10 mb-10\"><div class=\"clockicon_container\"> <i class=\"icon fa fa-file-text fa-fw \" aria-hidden=\"true\" title=\"Waiting list\" aria-label=\"Waiting list\"></i> </div><div class=\"clock_container\"> "+b.waitinglistenable+"</div></div>";f+="<div class=\"d-flex mt-10 mb-10\"><div class=\"usericon_container\"> <i class=\"icon fa fa-user fa-fw \" aria-hidden=\"true\" title=\"Users\" aria-label=\"Users\"></i> </div><div class=\"capacity_container\"> <span class=\"capacity_name\">Capacity :</span> <span class=\"capacity_count\">"+b.capacity+"</span></div><div class=\"enroll_container\"> <span class=\"enroll_name\">Enrolled : </span><span class=\"enroll_count\">"+b.enrolledusers+"</span></div><div class=\"waitinglist_container\"> <span class=\" waiting_name\"> Waiting List :</span><span class=\"waitinglist_count\">"+b.waitinglistinfo+"</span></div></div>"}i.event_details=f;c.create({title:h,body:e.render("block_training_calendar/popuptabs_display",i)}).done(function(b){b.setLarge();b.show();b.getRoot().click(function(){b.show()}.bind(this));a(".close").click(function(){b.hide();b.destroy()}.bind(this))})},load:function load(){}}});
//# sourceMappingURL=event_popup.min.js.map
