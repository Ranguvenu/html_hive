{"version":3,"sources":["../src/showcalendar.js"],"names":["define","$","M","cfg","wwwroot","initManage","fullCalendar","header","left","center","right","weekends","slotDuration","allDaySlot","axisFormat","defaultDate","Date","selectable","defaultView","eventLimit","cache","eventRender","event","element","resp","content","find","html","status","indexOf","val","loading","bool","show","hide","on","jq_conflict","jQuery","noConflict","events","url","type","data","statustype","change","init"],"mappings":"AAAAA,OAAM,wCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,gCAAvB,CAAyD,sCAAzD,CAAD,CAAmG,SAAUC,CAAV,CAAyC,CACpIC,CAAC,CAACC,GAAF,CAAMC,OAD8H,CAG9I,QAASC,CAAAA,CAAT,EAAsB,CAClBJ,CAAC,CAAC,WAAD,CAAD,CAAeK,YAAf,CAA4B,CAC5BC,MAAM,CAAE,CACPC,IAAI,CAAE,MADC,CAEPC,MAAM,CAAE,OAFD,CAGPC,KAAK,CAAE,MAHA,CADoB,CAM5BC,QAAQ,GANoB,CAO5BC,YAAY,CAAE,UAPc,CAQ5BC,UAAU,GARkB,CAS5BC,UAAU,CAAE,MATgB,CAU5BC,WAAW,CAAE,GAAIC,CAAAA,IAVW,CAW5BC,UAAU,GAXkB,CAY5BC,WAAW,CAAE,OAZe,CAa5BC,UAAU,GAbkB,CAsB5BC,KAAK,GAtBuB,CAuB5BC,WAAW,CAAE,SAAsBC,CAAtB,CAA4BC,CAA5B,CAAsC,CAClD,GAAIC,CAAAA,CAAI,CAAG,EAAX,CACAA,CAAI,EAAIF,CAAK,CAACG,OAAd,CACAF,CAAO,CAACG,IAAR,CAAa,WAAb,EAA0BC,IAA1B,CAA+BH,CAA/B,EACD,MAAoE,EAA7D,GAAC,KAAD,CAAQF,CAAK,CAACM,MAAd,EAAsBC,OAAtB,CAA8B5B,CAAC,CAAC,iBAAD,CAAD,CAAqB6B,GAArB,EAA9B,CACN,CA5B2B,CA6B5BC,OAAO,CAAE,iBAAUC,CAAV,CAAgB,CACxB,GAAIA,CAAJ,CACI/B,CAAC,CAAC,UAAD,CAAD,CAAcgC,IAAd,GADJ,IAGIhC,CAAAA,CAAC,CAAC,UAAD,CAAD,CAAciC,IAAd,EACJ,CAlC2B,CAA5B,EAqCAjC,CAAC,CAAC,iBAAD,CAAD,CAAqBkC,EAArB,CAAwB,QAAxB,CAAiC,UAAU,CACzCC,WAAW,CAAGC,MAAM,CAACC,UAAP,IAAd,CACAF,WAAW,CAAC,KAAD,CAAX,CAAmBF,IAAnB,GACA,GAAIK,CAAAA,CAAM,CAAG,CACPC,GAAG,CAAEtC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAe,sCADb,CAEPqC,IAAI,CAAE,MAFC,CAGPC,IAAI,CAAE,CACFC,UAAU,CAAG1C,CAAC,CAAC,iBAAD,CAAD,CAAqB6B,GAArB,EADX,CAHC,CAAb,CAOA7B,CAAC,CAAC,WAAD,CAAD,CAAeK,YAAf,CAA4B,mBAA5B,CAAiDiC,CAAjD,EACAtC,CAAC,CAAC,WAAD,CAAD,CAAeK,YAAf,CAA4B,gBAA5B,CAA8CiC,CAA9C,EACAtC,CAAC,CAAC,WAAD,CAAD,CAAeK,YAAf,CAA4B,eAA5B,CAGF,CAfA,EAeEsC,MAfF,EAgBH,CAED,MAAO,CACHC,IAAI,CAAE,eAAY,CACdxC,CAAU,EACb,CAHE,CAKV,CAhEK,CAAN","sourcesContent":["define(['jquery', 'jqueryui', 'block_training_calendar/moment', 'block_training_calendar/fullcalendar'], function ($, jqui, moment, fullCalendar) {\r\nvar wwwroot = M.cfg.wwwroot;\r\n \r\n    function initManage() {\r\n        $('#calendar').fullCalendar({  \r\n        header: {\r\n         left: 'prev',\r\n         center: 'title',\r\n         right: 'next'\r\n        },\r\n        weekends: true,\r\n        slotDuration: '00:30:00',\r\n        allDaySlot: false,        \r\n        axisFormat: 'h:mm', \r\n        defaultDate: new Date(),\r\n        selectable: true,\r\n        defaultView: 'month',\r\n        eventLimit: true,\r\n        /*events: {\r\n            url:M.cfg.wwwroot +\"/blocks/training_calendar/events.php\",\r\n            type: 'POST',\r\n            data: {\r\n                statustype:  $('#id_eventstatus').val();\r\n            }\r\n        },*/\r\n        //events: M.cfg.wwwroot +\"/blocks/training_calendar/events.php\",\r\n        cache: true,        \r\n        eventRender: function eventRender( event,element ) {\r\n         var resp = '';\r\n         resp += event.content;\r\n         element.find('.fc-title').html(resp);\r\n        return ['all', event.status].indexOf($('#id_eventstatus').val()) >= 0;\r\n        },\r\n        loading: function (bool) {\r\n         if (bool)\r\n             $('#loading').show();\r\n         else\r\n             $('#loading').hide();\r\n        }\r\n        });\r\n\r\n        $('#id_eventstatus').on('change',function(){\r\n          jq_conflict = jQuery.noConflict(false);\r\n          jq_conflict(\"#id\").hide();\r\n          var events = {\r\n                url: M.cfg.wwwroot +\"/blocks/training_calendar/events.php\",\r\n                type: 'POST',\r\n                data: {\r\n                    statustype:  $('#id_eventstatus').val()\r\n                }\r\n          }\r\n          $('#calendar').fullCalendar('removeEventSource', events);\r\n          $('#calendar').fullCalendar('addEventSource', events);\r\n          $('#calendar').fullCalendar('refetchEvents');\r\n          //$('#calendar').fullCalendar('rerenderEvents', events);\r\n          \r\n       }).change();      \r\n    }\r\n\r\n    return {\r\n        init: function () {\r\n            initManage();\r\n        }\r\n    };\r\n});\r\n"],"file":"showcalendar.min.js"}